lui t0,0x9			#wait
jal ra, DELAY
nop
nop
nop
addi a0,x0,0x28
jal ra,COMMAND
nop
nop
nop
lui t0,0x9			#wait
jal ra, DELAY
nop
nop
nop
addi a0,x0,0x0F
jal ra,COMMAND
nop
nop
nop
addi a0,x0,0x01
jal ra,COMMAND
nop
nop
nop
lui t0,0x9			#wait
jal ra, DELAY
nop
nop
nop
addi a0,x0,0x06
jal ra,COMMAND
nop
nop
nop

addi a0,x0,0x41
jal ra,DATA
nop
nop
nop
addi a0,x0,0x42
jal ra,DATA
nop
nop
nop
addi a0,x0,0x43
jal ra,DATA
nop
nop
nop



j END
nop
nop
#-------------------------COMMAND---------------
COMMAND:	#Input command is in a0
sw ra, 0(sp)
nop	#extremely important
addi sp,sp, -1

srli s11,a0,4			#PART 1-----------
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
ori s11,s11,0x10		#store command,En=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1500			#(1000x2)+2 instructions>40us
jal ra, DELAY
nop
nop
nop
add s11,x0,a0			#PART 2---------------
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
ori s11,s11,0x10		#store command,En=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1500			#(1000x2)+2 instructions>40us
jal ra, DELAY
nop
nop
nop

addi sp,sp, 1
nop
nop
nop
lw ra, 0(sp)
nop
nop
nop
jr ra
nop
nop
nop

#------------DELAY-----------
DELAY:	#take input in t0
#addi t0,x0,2047
nop
nop
HERE1:
addi t0,t0,-1
nop
nop
nop
bne t0,x0,HERE1
nop
nop
nop
jr ra
nop
nop
nop
#----------------------------

#-------------------------DATA---------------
DATA:	#Input command is in a0
sw ra, 0(sp)
nop	#extremely important
addi sp,sp, -1

srli s11,a0,4			#PART 1-----------
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
nop
nop
nop
ori s11,s11,0x20		#Rs=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
ori s11,s11,0x10		#store command,En=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1500			#(1000x2)+2 instructions>40us
jal ra, DELAY
nop
nop
nop
add s11,x0,a0			#PART 2---------------
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
nop
nop
nop
ori s11,s11,0x20		#Rs=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
ori s11,s11,0x10		#store command,En=1
addi t0,x0,1000			#(4x2)+2 instructions>1us
jal ra, DELAY
nop
nop
nop
andi s11,s11,0xF		#store command,En=0
addi t0,x0,1500			#(1000x2)+2 instructions>40us
jal ra, DELAY
nop
nop
nop

addi sp,sp, 1
nop
nop
nop
lw ra, 0(sp)
nop
nop
nop
jr ra
nop
nop
nop
END:
j END
